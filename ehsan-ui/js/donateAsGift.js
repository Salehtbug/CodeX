import{i as e}from"./selectAmountModule.js";import{i as t}from"./countryCodeModule.js";import"./tom-select.complete.js";const o=document.getElementById("donateAsGiftCheckbox"),n=document.querySelectorAll(".donate-input"),a=document.getElementById("donateAsGiftCheckboxLabel"),c=document.getElementById("activeGiftIcon"),r=document.getElementById("maincontent"),l=document.getElementById("disableGiftIcon"),d=document.getElementById("donateAsGiftWrapper"),i=document.querySelector(".add-to-cart"),s=document.querySelector(".main-amount");let u=r.dataset.monthprice||null,m=r.dataset.itemprice||null,f=r.dataset.remainingmonths||null;const g=["10","50","100"].map((e=>`GiftAmounts=${encodeURIComponent(e)}`)).join("&");!function(){const e=document.querySelectorAll(".country-code");t(e)}();function y(e,t,o,n){e&&(n?(t&&e.classList.add(t),o&&e.classList.remove(o)):(t&&e.classList.remove(t),o&&e.classList.add(o)))}async function h(){const t=o.checked,r=document.getElementById("donateNow");var h,L;if(y(c,"d-none",null,!t),y(l,null,"d-none",!t),a.classList.toggle("text-primary",t),h=t,L="opacity-50",n.forEach((e=>{e.disabled=h,e.classList.toggle(L,h),e.classList.remove("btn-primary"),e.classList.add("btn-secondary"),e.value=""})),t)try{const t=await fetch(`/gift/create?stockItemPrice=null&storeItemPrice=${m}&orphansMonthlyValue=${u}&remainingMonths=${f}&${g}&validateMobile=true`,{method:"GET"});if(!t.ok)throw new Error("Failed to create gift");const o=await t.text();if(d.innerHTML=o,e(),null!=m){let e=document.querySelector(".main-amount");if(e&&e.readOnly){let e=document.querySelectorAll(".unities-amount");e.length>0&&e.forEach((function(e){e.readOnly=!0}))}}const n=d.querySelector(".remove-giftee-item");n&&n.classList.remove("d-none"),i&&(i.disabled=!0),s&&(s.dataset.required=!1)}catch(b){console.error("Error creating gift:",b)}else i&&(i.disabled=!1),d.innerHTML="";r.classList.add("disabled")}new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{e instanceof HTMLElement&&e.querySelector(".country-code")&&t(e.querySelectorAll(".country-code"))}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#donateAsGiftCheckbox"),t=document.querySelector("#activeGiftIcon"),o=document.querySelector("#disableGiftIcon"),n=document.querySelector("#donateAsGiftCheckboxLabel");e&&(e.checked=!1),y(t,"d-none",null,!0),y(o,null,"d-none",!0),n&&n.classList.remove("text-primary")})),null==o||o.addEventListener("change",h),d&&document.addEventListener("DOMContentLoaded",(()=>{d.addEventListener("click",(t=>{const n=document.getElementById("giftMax");if(t.target&&"addGiftee"===t.target.id||"addGifteeImage"===t.target.id&&"False"==t.target.dataset.orphans){if(document.querySelectorAll(".gifteeBoxDetails").length>=5)return console.log("You can only add a maximum of 5 Giftees"),void(null==n||n.classList.remove("d-none"));if(null==n||n.classList.add("d-none"),f<=0)return void async function(t){try{const o=await fetch(`/gift/new-giftee?index=1&stockItemPrice=null&storeItemPrice=${m}&orphansMonthlyValue=${u}&remainingMonths=${f}&${g}&validateMobile=true`,{method:"GET"});if(!o.ok)throw new Error("Failed to load giftee structure");const n=await o.text();if("addGifteeImage"==t.id&&(t=t.closest("button")),t.closest("#addGiftee").insertAdjacentHTML("beforebegin",n),e(),null!=m){let e=document.querySelector(".main-amount");if(e&&e.readOnly){let e=document.querySelectorAll(".unities-amount");e.length>0&&e.forEach((function(e){e.readOnly=!0}))}}}catch(o){console.error("Error adding giftee:",o)}}(t.target)}if(t.target&&t.target.classList.contains("remove-giftee-item")&&"False"==t.target.dataset.orphans){console.log("here"),1===document.querySelectorAll(".remove-giftee-btn").length&&(o.checked=!1,h()),t.target.closest(".gifteeBoxDetails").remove(),document.getElementById("donateNow").classList.remove("disabled")}}))}));
//# sourceMappingURL=donateAsGift.js.map
