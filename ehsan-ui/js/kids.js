let t=document.querySelectorAll(".btn-increase"),e=document.querySelectorAll(".btn-decrease"),s=document.getElementById("kidsTotalDonation");const a=document.getElementById("kidsFooter"),n=document.getElementById("countOfItems");let i=document.getElementById("kidsTotalAmount");const l=document.getElementById("kidsDonateNow"),o=document.querySelector(".pay-icon"),r=document.getElementById("kidsCart");let d={};function c(){var t;const c=localStorage.getItem("kidsopportunitiesList");if(c){d=JSON.parse(c);let e=0,u=0;for(const s in d)if(d.hasOwnProperty(s)){const a=d[s];e+=a.TotalUnitPrice;const n=null==(t=document.querySelector(`.btn-increase[data-id="${s}"]`))?void 0:t.nextElementSibling;n&&(n.value=a.TotalUnitPrice/a.UnitPrice,u+=Number(n.value)),n&&n.value>0?(n.nextElementSibling.classList.add("btn-primary"),null==n||n.nextElementSibling.classList.remove("bg-neutral-2")):(null==n||n.nextElementSibling.classList.remove("btn-primary"),null==n||n.nextElementSibling.classList.add("bg-neutral-2"))}u>0&&(n.textContent=u,n.classList.remove("d-none")),i&&(i.value=e),s&&(s.textContent=e),a&&(e>0?(a.classList.add("footer-active"),a.classList.remove("footer-disactive"),l.classList.remove("bg-neutral-2","text-neutral-5"),l.classList.add("btn-light","text-secondary"),o.classList.remove("d-none"),r.classList.add("bg-primary-7")):(a.classList.remove("footer-active"),a.classList.add("footer-disactive"),l.classList.add("bg-neutral-2","text-neutral-5"),l.classList.remove("btn-light","text-secondary"),o.classList.add("d-none"),r.classList.remove("bg-primary-7"),n.classList.add("d-none")))}else{document.querySelectorAll(".kids-quantity").forEach((t=>{t.value=0})),e.forEach((t=>{t.classList.remove("btn-primary"),t.classList.add("bg-neutral-2")})),n.classList.add("d-none")}}c(),t.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();const c=t.closest(".product-card"),u=document.getElementById("kidsCart"),m=t.getBoundingClientRect(),v=c.cloneNode(!0);document.getElementById("kidsFooter").appendChild(v);const g=c.getBoundingClientRect();v.classList.add("z-index-1070"),v.style.position="absolute",v.style.right="0px",v.style.bottom="0px",v.style.width=`${g.width}px`,v.style.height=`${g.height}px`,u.style.top=`${m.top}px`,u.style.right=`${m.left+m.width}px`,v.classList.add("animate-to-cart"),v.addEventListener("animationend",(()=>{v.remove()}));let L=t.closest(".amount-wrapper").querySelector(".btn-decrease"),b=t.nextElementSibling,y=Number(i.value),p=Number(t.dataset.unit);b.classList.add("value-change-animation"),setTimeout((()=>{b.classList.remove("value-change-animation")}),300),i.value=y+p,b.value=Number(b.value)+1,n.textContent=Number(n.textContent)+1,n.classList.remove("d-none"),s&&(s.textContent=i.value),i.value>0&&(a.classList.add("footer-active"),a.classList.remove("footer-disactive"),l.classList.remove("bg-neutral-2","text-neutral-5"),l.classList.add("btn-light","text-secondary"),o.classList.remove("d-none"),r.classList.add("bg-primary-7"));let h={};h.TotalUnitPrice=Number(p)*Number(b.value),h.UnitPrice=p,h.OpportunityId=t.dataset.id,d[`${t.dataset.id}`]=h,localStorage.setItem("kidsopportunitiesList",JSON.stringify(d)),b.value>0?(L.classList.add("btn-primary"),L.classList.remove("bg-neutral-2")):(L.classList.remove("btn-primary"),L.classList.add("bg-neutral-2"))}))})),e.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();let c=t.previousElementSibling;if(0==c.value)return!1;let u=Number(i.value),m=Number(t.dataset.unit);c.classList.add("value-change-animation"),setTimeout((()=>{c.classList.remove("value-change-animation")}),300),i.value=u-m,c.value=Number(c.value)-1,s.textContent=i.value,n.textContent=Number(n.textContent)-1,0==i.value&&(a.classList.remove("footer-active"),a.classList.add("footer-disactive"),r.classList.remove("bg-primary-7"),o.classList.add("d-none"),l.classList.add("bg-neutral-2","text-neutral-5"),l.classList.remove("btn-light","text-secondary"),n.classList.add("d-none"));for(const s in d)if(d.hasOwnProperty(s)&&s==t.dataset.id){const t=d[s];t.TotalUnitPrice=Number(t.TotalUnitPrice)-m,t.UnitPrice=m,0==Number(t.TotalUnitPrice)&&delete d[s]}localStorage.setItem("kidsopportunitiesList",JSON.stringify(d)),c.value<1?(t.classList.remove("btn-primary"),t.classList.add("bg-neutral-2")):(t.classList.add("btn-primary"),t.classList.remove("bg-neutral-2"))}))}));let u=document.getElementById("doantionData");document.getElementById("donateKidsForm");const m=document.getElementById("kidsDonateSuccessModal");let v="";m&&(v=new bootstrap.Modal("#kidsDonateSuccessModal")),null==l||l.addEventListener("click",(t=>{if(t.preventDefault(),0==s.textContent)return!1;t.target.disabled=!0;let e=[];u.innerHTML="";for(const s in d)d.hasOwnProperty(s)&&e.push({TotalUnitPrice:d[s].TotalUnitPrice,UnitPrice:d[s].UnitPrice,OpportunityId:s});let n={Donations:e};fetch("/Kids/Donate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),async:!1}).then((t=>t.json())).then((n=>{if(n.isSuccess){document.getElementById("donarName").textContent=n.result,v.show(),localStorage.setItem("kidsopportunitiesList",""),a.classList.remove("footer-active"),a.classList.add("footer-disactive"),l.classList.add("bg-neutral-2","text-neutral-5"),l.classList.remove("btn-light","text-secondary"),o.classList.add("d-none"),r.classList.remove("bg-primary-7"),e=[],s.textContent=0,i.value=0,c(),t.target.disabled=!1}else t.target.disabled=!0,window.location.href=n.result})).catch((e=>{t.target.disabled=!0,console.error(e)}))})),null==m||m.addEventListener("hidden.bs.modal",(function(t){c()})),document.querySelectorAll(".activation-status").forEach((t=>{t.addEventListener("click",(()=>{let e=t.dataset.id,s="True"!==t.dataset.status;fetch(`/KidsManagement/UpdateActivationStatus?id=${e}&isActive=${s}`,{method:"PUT",async:!1}).then((t=>t.json())).then((t=>{t.success&&window.location.reload()}))}))}));
//# sourceMappingURL=kids.js.map
