import{P as e}from"./redirectToPayment.js";import"./bootstrap.js";const t=new e,a=document.getElementById("toggleQuickDonation"),r=document.getElementById("qd-formPage");document.getElementById("toggleQuickDonationText");const n=document.getElementById("quickDonationWrapper"),s=document.querySelectorAll("#qd-pre-amounts button"),o=document.getElementById("qd_amount"),i=document.getElementById("quickDonationPayBtn"),d=document.querySelectorAll(".qd-btn-select");let c=document.querySelector("#donationCurrency");function l(){o.value="",s.forEach((e=>{e.setAttribute("aria-checked","false"),e.classList.remove("btn-primary"),e.classList.add("btn-secondary")}))}if(a&&a.addEventListener("click",(function(){this.classList.toggle("w-330px"),n.classList.toggle("show"),l()})),a||r){let e=function(){const e=o.value.trim(),t=document.getElementById("qd_handdleError");return t.textContent="",t.classList.add("d-none"),o.classList.remove("border-error-7"),c.classList.remove("border-error-7"),e?!(isNaN(e)||e<1||e>1e6)||(a(o,"مبلغ التبرع بين 1 و 1000000 ريال سعودي"),!1):(a(o,"الرجاء إدخال مبلغ التبرع"),!1)},a=function(e,t){const a=document.getElementById("qd_handdleError");a.textContent=t,a.classList.remove("d-none"),e.classList.add("border-error-7"),c&&c.classList.add("border-error-7")};s.forEach((t=>{t.addEventListener("click",(()=>{const a=t.getAttribute("data-amount");o.value=a,e(),s.forEach((e=>{e.setAttribute("aria-checked","false"),e.classList.remove("btn-primary"),e.classList.add("btn-secondary")})),t.setAttribute("aria-checked","true"),t.classList.add("btn-primary"),t.classList.remove("btn-secondary")}))})),d.forEach((e=>{e.addEventListener("click",(function(){d.forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false"),e.setAttribute("aria-current","false"),e.tabIndex=-1})),this.classList.add("active"),this.setAttribute("aria-pressed","true"),this.setAttribute("aria-current","page"),this.tabIndex=0,i.dataset.type=this.dataset.type,i.dataset.initiativetype=this.dataset.initiativetype,i.setAttribute("aria-label",` تبرع الآن ل${e.innerText}`)}))})),i.addEventListener("click",(()=>{const a=o.value.trim();if(!e())return;const n=new FormData;n.append("CartItems[0][Amount]",a),n.append("CartItems[0][InitiativeType]",i.dataset.type),r&&n.append("FastDonationSource",document.querySelector("#fastDonationSource").value),null==i||i.classList.add("disabled"),fetch("/QuickDonate",{method:"POST",body:n}).then((e=>e.json())).then((e=>{if(t.redirectToPayment(!0),t.handleResponse(!1),!e.isSuccess)throw new Error(e.message);window.location.href=`${e.redirectToUrl}`})).catch((e=>{null==i||i.classList.remove("disabled"),t.handleResponse(!0);document.getElementById("srNotificationArea").innerHTML="حدث خطأ أثناء الانتقال إلى صفحة الدفع",document.getElementById("redirectToPayment").setAttribute("aria-describedby","redirectToPayment_error")}))})),o.addEventListener("input",(t=>{t.target.value=t.target.value.replace(/\D/g,""),t.target.value||l(),e()}))}
//# sourceMappingURL=quickDonation.js.map
