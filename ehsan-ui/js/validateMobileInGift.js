import{M as e}from"./bootstrap.js";import{i as t}from"./otpModule.js";import{r as l}from"./replaceArabicNumerals.js";const n=document.querySelectorAll(".verification-inputs-otp");let s=document.getElementById("donateAsGiftWrapper"),o=document.getElementById("validateMobileNumberModal"),r=null;function a(e){const t=e.target;t.value=t.value.replace(/[^a-zA-Z0-9\u0600-\u06FF ]/g,"")}o&&(r=new e(o)),n.forEach((function(e){var l,n;let s=e.querySelectorAll(".otp-input"),o=null==(l=e.closest(".validate-mobile-wrapper"))?void 0:l.querySelector("#validateOtp"),a=null==(n=e.closest("#validateMobileNumberModal"))?void 0:n.querySelector("#closeValidationMobileModal");t(s,o,"/gift/ValidateOtp/",a,r)})),s&&s.addEventListener("click",(function(e){var t;if("validateMobileNumberInGift"!==e.target.id)return;e.target.classList.add("disabled"),s.querySelector("#senderData").querySelectorAll(".required-message").forEach((e=>e.remove()));const l=document.getElementById("SenderName"),n=s.querySelector("#SenderNameErr"),o=s.querySelector("#mobileNumberContainer"),a=null==o?void 0:o.querySelector(".input-gifteeNumber"),i=s.querySelector("#mobileNumberErr"),d=document.getElementById("msgLimitationError");null==(t=o.querySelector(".required-message"))||t.remove();let c=null==a?void 0:a.value.trim();const u=null==l?void 0:l.value.trim();null==n||n.classList.add("d-none"),null==i||i.classList.add("d-none"),null==d||d.classList.add("d-none");let m=!0;(!u||u.length<=1)&&(n&&(n.classList.remove("d-none"),n.textContent="الاسم مطلوب ويجب أن يكون أكبر من حرفين."),m=!1),c?/^5\d{8}$/.test(c)||(null==i||i.classList.remove("d-none"),i.textContent="رقم الجوال يجب أن يبدأ بـ 5 ويتكون من 9 أرقام.",m=!1):(null==i||i.classList.remove("d-none"),i.textContent="الحقل مطلوب.",m=!1),m&&(c="0"+c,fetch(`/gift/SendOtp/${c}`,{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{if(t.isSuccess){document.getElementById("aliaseMobileNumber").textContent=c.slice(-4),r&&(r.show(),setTimeout((()=>{var e;null==(e=document.getElementById("code1"))||e.focus()}),1e3))}else d&&(d.textContent=t.result||"حدث خطأ أثناء معالجة الطلب.",d.classList.remove("d-none")),e.target.classList.remove("disabled")})).catch((t=>{e.target.classList.remove("disabled"),console.error("Error sending OTP:",t)})))})),s&&s.addEventListener("input",(function(e){const t=e.target;if(t.classList.contains("number-only")&&(t.value=t.value.replace(/[^0-9\u0660-\u0669]/g,""),t.value=l(t.value)),t.classList.contains("remove-special-char")&&t.addEventListener("input",a),"SenderName"===t.id){t.nextElementSibling.classList.contains("required-message")&&t.nextElementSibling.remove();const e=document.getElementById("SenderNameErr");t.value.trim().length>1?(null==e||e.classList.add("d-none"),t.classList.remove("border-danger")):(null==e||e.classList.remove("d-none"),e.textContent="الاسم مطلوب ويجب أن يكون أكبر من حرفين.",t.classList.add("border-danger"))}if(t.classList.contains("sender-gift-mobile-number")){t.closest("#mobileNumberContainer").nextElementSibling.classList.contains("required-message")&&t.closest("#mobileNumberContainer").nextElementSibling.remove();const e=document.getElementById("mobileNumberErr"),l=t.value.trim(),n=/^5\d{8}$/;s.querySelector("#validateMobileNumberInGift").classList.remove("d-none");const o=document.querySelector("#validateMobileNumberSuccess");if(o&&(o.classList.remove("show"),o.classList.add("d-none")),l&&n.test(l)){null==e||e.classList.add("d-none"),t.classList.remove("border-danger"),s.querySelector("#validateMobileNumberInGift").classList.remove("disabled");let n=document.getElementById("verificationMobileNumber");n.dataset.valid&&(l!=n.dataset.validnumber?n.dataset.valid=!1:(n.dataset.valid=!0,s.querySelector("#validateMobileNumberInGift").classList.add("d-none"),n.classList.add("d-none")))}else l?(null==e||e.classList.remove("d-none"),e.textContent="رقم الجوال يجب أن يبدأ بـ 5 ويتكون من 9 أرقام.",t.classList.add("border-danger")):(null==e||e.classList.remove("d-none"),e.textContent="الحقل مطلوب.",t.classList.add("border-danger"))}}));
//# sourceMappingURL=validateMobileInGift.js.map
